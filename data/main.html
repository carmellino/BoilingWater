<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Zagadnienie po≈õrednika</title>
    <style>
        .button {
          border: none;
          color: white;
          padding: 15px 32px;
          text-align: center;
          text-decoration: none;
          display: inline-block;
          font-size: 16px;
          margin: 4px 2px;
          cursor: pointer;
        }
        
        .button1 {background-color: #4CAF50;} /* Green */
        .button2 {background-color: #008CBA;} /* Blue */
        </style>
  </head>
  <body>
      <link rel="stylesheet" href="main.css">
      <p>Dane 1</p>

      <button class="button button1">Green</button>
      <button class="button button2">Blue</button>

      <div id="aaaaaaaaaaaaa"></div>
      <label style="color:black">Supp</label>
      <input type="number" id="supp" value="" />
      <!--
    <button id="supp_button">Enter</button>
    <button id="cust_button">Enter</button>
    -->
      <div id="aaaaaaaaaaaaa"></div>
      <label style="color:black">Cust</label>
      <input type="number" id="cust" value="" />



      <label style="color:black">Oblicz</label>
      <input id="Oblicz" value="" />
      <button id="enter">enter</button>
      <button id="bleb">bleb</button>
      <table id="Lable" border="1" cellpadding="2">
      </table>
      <script type="text/javascript" src="main.js" id="yup"></script>
      <script>

          function Play(x, y) {
              var data = new Array(x);
              for (var i = 0; i < x; i++) {
                  var tmp = new Array(y);
                  for (var j = 0; j < y; j++) {
                      console.log("field" + (i - 1) + ',' + (j - 1));
                      tmp[j] = document.getElementById("field" + (i - 1) + ',' + (j - 1)).value;
                  }
                  data[i] = tmp;
                  delete tmp;
              }
              var pop = new Array(y);
              for (var i = 0; i < y; i++) {
                  console.log("pop" + "field-2" + ',' + (j - 1));
                  pop[i] = document.getElementById("field-2" + ',' + (i - 1)).value;
              }
              var pod = new Array(x);
              for (var i = 0; i < x; i++) {
                  pod[i] = document.getElementById("field" + (i-1) + ',-2').value;
              }
              var buy = new Array(x);
              for (var i = 0; i < x; i++) {
                  console.log(document.getElementById("field" + (i - 1) + "," + x).value);
                  buy[i] = document.getElementById("field" + (i - 1) + "," + x).value;
              }
              var sell = new Array(y);
              for (var i = 0; i < y; i++) {
                  console.log("sellfield" + (y-2) + "," + (i - 1));
                  sell[i] = document.getElementById("field" + (y - 2) + "," + (i - 1)).value;
              }
              console.log(data);
              console.log(pop);
              console.log(pod);
              console.log(buy);
              console.log(sell);
          }

          const button = document.getElementById('enter');
          const button2 = document.getElementById('bleb');
          const table = document.getElementById("Lable");
          console.log(button);
          var cust,supp;

          button.addEventListener('click', async event => {
              console.log('chuj');
              cust = document.getElementById('cust').value;
              supp = document.getElementById('supp').value;

              
              while (table.firstChild) {
                  table.removeChild(table.firstChild);
              }

              for (var i = -2; i < supp; i++) {
                  var tr = document.createElement('TR');
                  table.appendChild(tr);
                  console.log("DUPA1");
                  for (var j = -2; j < cust; j++) {
                      console.log("DUPA");
                      var td = document.createElement('TD');
                      td.width = '75';
                      td.id = "cell" + i + "," + j;
                      var input = document.createElement("INPUT");
                      input.id = "field" + i + "," + j;
                      input.value = 0;
                      input.type = "number";
                      td.appendChild(input);
                      console.log(td.id);
                      tr.appendChild(td);
                  }
              }
              console.log("Jebac");
              
              
              console.log("supp" + supp);
              
              const name = document.getElementById('Oblicz').value;
              console.log("Cust" + cust);
              const data = { name, supp, cust };
              console.log(typeof supp);
              console.log(typeof data);
              console.log(JSON.stringify(data));
              const options = {
                  method: 'POST',
                  headers: {
                      'Content-Type': 'application/json'
                  },
                  body: JSON.stringify(data)
              };
              const response = await fetch('/newdata', options);
              const json = await response.json();
              console.log(json);
          });
          
          button2.addEventListener('click', async event =>{
            console.log('Niewiarygodnie dobrze napisany kod');
            var table = document.getElementById("Lable");
            console.log(cust+ "  "+supp);
            for(var i = -1; i<cust;i++){
                for(var j = -1;j<supp;j++){
                    console.log(1);
                }
            }
            Play(supp, cust);
          })
      </script>

  </body>
</html>